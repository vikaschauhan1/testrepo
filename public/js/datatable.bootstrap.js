(function(window,document,undefined){var factory=function($,DataTable){"use strict";var Responsive=function(settings,opts){if(!DataTable.versionCheck||!DataTable.versionCheck('1.10.1')){throw'DataTables Responsive requires DataTables 1.10.1 or newer';}else if(settings.responsive){return;}this.s={dt:new DataTable.Api(settings),columns:[]};if(opts&&typeof opts.details==='string'){opts.details={type:opts.details};}this.c=$.extend(true,{},Responsive.defaults,opts);settings.responsive=this;this._constructor();};Responsive.prototype={_constructor:function(){var that=this;var dt=this.s.dt;$(window).on('resize.dtr',dt.settings()[0].oApi._fnThrottle(function(){that._resize();}));dt.on('destroy.dtr',function(){$(window).off('resize.dtr');});this.c.breakpoints.sort(function(a,b){return a.width<b.width?1:a.width>b.width?-1:0;});this._classLogic();this._resizeAuto();this._resize();var details=this.c.details;if(details.type){that._detailsInit();this._detailsVis();dt.on('column-visibility.dtr',function(){that._detailsVis();});$(dt.table().node()).addClass('dtr-'+details.type);}},_columnsVisiblity:function(breakpoint){var dt=this.s.dt;var columns=this.s.columns;var i,ien;var display=$.map(columns,function(col){return col.auto&&col.minWidth===null?false:col.auto===true?'-':col.includeIn.indexOf(breakpoint)!==-1;});var requiredWidth=0;for(i=0,ien=display.length;i<ien;i++){if(display[i]===true){requiredWidth+=columns[i].minWidth;}}var widthAvailable=dt.table().container().offsetWidth;var usedWidth=widthAvailable-requiredWidth;for(i=0,ien=display.length;i<ien;i++){if(columns[i].control){usedWidth-=columns[i].minWidth;}else if(display[i]==='-'){display[i]=usedWidth-columns[i].minWidth<0?false:true;usedWidth-=columns[i].minWidth;}}var showControl=false;for(i=0,ien=columns.length;i<ien;i++){if(!columns[i].control&&!display[i]){showControl=true;break;}}for(i=0,ien=columns.length;i<ien;i++){if(columns[i].control){display[i]=showControl;}}return display;},_classLogic:function(){var that=this;var calc={};var breakpoints=this.c.breakpoints;var columns=this.s.dt.columns().eq(0).map(function(i){return{className:this.column(i).header().className,includeIn:[],auto:false,control:false};});var add=function(colIdx,name){var includeIn=columns[colIdx].includeIn;if(includeIn.indexOf(name)===-1){includeIn.push(name);}};var column=function(colIdx,name,operator,matched){var size,i,ien;if(!operator){columns[colIdx].includeIn.push(name);}else if(operator==='max-'){size=that._find(name).width;for(i=0,ien=breakpoints.length;i<ien;i++){if(breakpoints[i].width<=size){add(colIdx,breakpoints[i].name);}}}else if(operator==='min-'){size=that._find(name).width;for(i=0,ien=breakpoints.length;i<ien;i++){if(breakpoints[i].width>=size){add(colIdx,breakpoints[i].name);}}}else if(operator==='not-'){for(i=0,ien=breakpoints.length;i<ien;i++){if(breakpoints[i].name.indexOf(matched)===-1){add(colIdx,breakpoints[i].name);}}}};columns.each(function(col,i){var classNames=col.className.split(' ');var hasClass=false;for(var k=0,ken=classNames.length;k<ken;k++){var className=$.trim(classNames[k]);if(className==='all'){hasClass=true;col.includeIn=$.map(breakpoints,function(a){return a.name;});return;}else if(className==='none'){hasClass=true;return;}else if(className==='control'){hasClass=true;col.control=true;return;}$.each(breakpoints,function(j,breakpoint){var brokenPoint=breakpoint.name.split('-');var re=new RegExp('(min\\-|max\\-|not\\-)?('+brokenPoint[0]+')(\\-[_a-zA-Z0-9])?');var match=className.match(re);if(match){hasClass=true;if(match[2]===brokenPoint[0]&&match[3]==='-'+brokenPoint[1]){column(i,breakpoint.name,match[1],match[2]+match[3]);}else if(match[2]===brokenPoint[0]&&!match[3]){column(i,breakpoint.name,match[1],match[2]);}}});}if(!hasClass){col.auto=true;}});this.s.columns=columns;},_detailsInit:function(){var that=this;var dt=this.s.dt;var details=this.c.details;if(details.type==='inline'){details.target='td:first-child';}var target=details.target;var selector=typeof target==='string'?target:'td';$(dt.table().body()).on('click',selector,function(e){if(typeof target==='number'){var targetIdx=target<0?dt.columns().eq().length+target:target;if(dt.cell(this).index().column!==targetIdx){return;}}if(!$(dt.table().node()).hasClass('collapsed')){return;}var row=dt.row($(this).closest('tr'));if(row.child.isShown()){row.child(false);$(row.node()).removeClass('parent');}else{var info=that.c.details.renderer(dt,row[0]);row.child(info,'child').show();$(row.node()).addClass('parent');}});},_detailsVis:function(){var that=this;var dt=this.s.dt;if(dt.columns().visible().indexOf(false)!==-1){$(dt.table().node()).addClass('collapsed');dt.rows().eq(0).each(function(idx){var row=dt.row(idx);if(row.child()){var info=that.c.details.renderer(dt,row[0]);if(info===false){row.child.hide();}else{row.child(info,'child').show();}}});}else{$(dt.table().node()).removeClass('collapsed');dt.rows().eq(0).each(function(idx){dt.row(idx).child.hide();});}},_find:function(name){var breakpoints=this.c.breakpoints;for(var i=0,ien=breakpoints.length;i<ien;i++){if(breakpoints[i].name===name){return breakpoints[i];}}},_resize:function(){var dt=this.s.dt;var width=$(window).width();var breakpoints=this.c.breakpoints;var breakpoint=breakpoints[0].name;for(var i=breakpoints.length-1;i>=0;i--){if(width<=breakpoints[i].width){breakpoint=breakpoints[i].name;break;}}var columns=this._columnsVisiblity(breakpoint);dt.columns().eq(0).each(function(colIdx,i){dt.column(colIdx).visible(columns[i]);});},_resizeAuto:function(){var dt=this.s.dt;var columns=this.s.columns;if(!this.c.auto){return;}if($.inArray(true,$.map(columns,function(c){return c.auto;}))===-1){return;}var tableWidth=dt.table().node().offsetWidth;var columnWidths=dt.columns;var clonedTable=dt.table().node().cloneNode(false);var clonedHeader=$(dt.table().header()).clone(false).appendTo(clonedTable);var clonedRow=$(dt.table().body().cloneNode(true)).appendTo(clonedTable);var cells=dt.settings()[0].oApi._fnGetUniqueThs(dt.settings()[0],clonedHeader);var inserted=$('<div/>').css({width:1,height:1,overflow:'hidden'}).append(clonedTable).insertBefore(dt.table().node());dt.columns().eq(0).each(function(idx){columns[idx].minWidth=dt.column(idx).visible()?cells[dt.column(idx).index('visible')].offsetWidth:null;});inserted.remove();}};Responsive.breakpoints=[{name:'desktop',width:Infinity},{name:'tablet-l',width:1024},{name:'tablet-p',width:768},{name:'mobile-l',width:480},{name:'mobile-p',width:320}];Responsive.defaults={breakpoints:Responsive.breakpoints,auto:true,details:{renderer:function(api,rowIdx){var data=api.cells(rowIdx,':hidden').eq(0).map(function(cell){var header=$(api.column(cell.column).header());if(header.hasClass('control')){return'';}return'<li>'+'<span class="dtr-title">'+header.text()+':'+'</span> '+'<span class="dtr-data">'+api.cell(cell).data()+'</span>'+'</li>';}).toArray().join('');return data?$('<ul/>').append(data):false;},target:0,type:'inline'}};Responsive.version='1.0.0';$.fn.dataTable.Responsive=Responsive;$.fn.DataTable.Responsive=Responsive;$(document).on('init.dt.dtr',function(e,settings,json){if($(settings.nTable).hasClass('responsive')||$(settings.nTable).hasClass('dt-responsive')||settings.oInit.responsive){var init=settings.oInit.responsive;if(init!==false){new Responsive(settings,$.isPlainObject(init)?init:{});}}});return Responsive;};if(typeof define==='function'&&define.amd){define(['jquery','datatables'],factory);}else if(typeof exports==='object'){factory(require('jquery'),require('datatables'));}else if(jQuery&&!jQuery.fn.dataTable.Responsive){factory(jQuery,jQuery.fn.dataTable);}})(window,document);